pipeline {
  agent any
  options {
    skipDefaultCheckout()
  }
  stages {
    stage('Building: public (develop branch)') {
      steps {
        script {
          try {
            echo "Building: env.JOB_NAME=${env.JOB_NAME} env.BUILD_ID=${env.BUILD_ID}"
            openshiftBuild bldCfg: 'angular-on-nginx-build-angular-app-build', showBuildLogs: 'true'
          } catch (e) {
            error("Building: Failed: ${e}")
          }
          echo "Building: Success"
        }
      }
    }
    stage('Deploying: public (develop branch)') {
      steps {
        script {
          try {
            echo "Deploying: env.JOB_NAME=${env.JOB_NAME} env.BUILD_ID=${env.BUILD_ID}"
            openshiftBuild bldCfg: 'angular-on-nginx-build', showBuildLogs: 'true'
          } catch (e) {
            error("Deploying: Failed: ${e}")
          }
          echo "Deploying: Success"
        }
      }
    }
  }
}
